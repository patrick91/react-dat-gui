{"version":3,"sources":["../../src/components/DatString.jsx"],"names":["DatString","props","context","handleChange","bind","handleFocus","handleBlur","handleKeyDown","setState","value","getValue","nextProps","data","path","event","target","liveUpdate","update","document","addEventListener","removeEventListener","window","getSelection","removeAllRanges","key","keyCode","which","state","_onUpdateValue","onUpdate","label","labelWidth","labelText","width","Component","propTypes","object","string","number","bool","func"],"mappings":"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","file":"DatString.js","sourcesContent":["import result from 'lodash.result';\nimport isString from 'lodash.isstring';\nimport React, { PropTypes } from 'react';\n\nclass DatString extends React.Component {\n\n    static propTypes = {\n        data: PropTypes.object,\n        path: PropTypes.string,\n        label: PropTypes.string,\n        labelWidth: PropTypes.number,\n        liveUpdate: PropTypes.bool,\n        onUpdate: PropTypes.func,\n        _onUpdateValue: PropTypes.func,\n    };\n\n    constructor(props, context) {\n        super(props, context);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleFocus = this.handleFocus.bind(this);\n        this.handleBlur = this.handleBlur.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentWillMount() {\n        this.setState({\n            value: this.getValue()\n        });\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            value: this.getValue(nextProps)\n        });\n    }\n\n    getValue(props = this.props) {\n        return result(props.data, props.path);\n    }\n\n    handleChange(event) {\n        const value = event.target.value;\n        this.setState({ value }, () => {\n            this.props.liveUpdate && this.update();\n        });\n    }\n\n    handleFocus(event) {\n        document.addEventListener('keydown', this.handleKeyDown);\n    }\n\n    handleBlur(event) {\n        document.removeEventListener('keydown', this.handleKeyDown);\n        window.getSelection().removeAllRanges();\n        !this.props.liveUpdate && this.update();\n    }\n\n    handleKeyDown(event) {\n        const key = event.keyCode || event.which;\n        if (key === 13) {\n            !this.props.liveUpdate && this.update();\n        }\n    }\n\n    update() {\n        const { value } = this.state;\n        this.props._onUpdateValue && this.props._onUpdateValue(this.props.path, value);\n        this.props.onUpdate && this.props.onUpdate(value);\n    }\n\n    render() {\n        const { path, label, labelWidth } = this.props;\n        const labelText = isString(label) ? label : path;\n        return (\n            <li className=\"cr string\">\n                <label>\n                    <span className=\"label-text\" style={{ width: `${labelWidth}%` }}>{labelText}</span>\n                    <input\n                        type=\"text\"\n                        value={this.state.value}\n                        style={{ width: `${100 - labelWidth}%` }}\n                        onChange={this.handleChange}\n                        onFocus={this.handleFocus}\n                        onBlur={this.handleBlur} />\n                </label>\n            </li>\n        );\n    }\n\n}\n\nexport default DatString;\n"]}